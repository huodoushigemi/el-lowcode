import{customRef as m,nextTick as R,watch as w}from"https://play.vuejs.org/vue.runtime.esm-browser.js";import{u as x,a as _}from"./vue-router-c2950203.js";import{t as k,a as n}from"./@vueuse-core-4d211eeb.js";const u=new WeakMap;function j(t,i,p={}){const{mode:f="replace",route:r=x(),router:y=_(),transform:h=s=>s}=p;u.has(r)||u.set(r,new Map);const e=u.get(r);k(()=>{e.delete(t)}),e.set(t,r.query[t]);let c;const l=m((s,a)=>(c=a,{get(){s();const o=e.get(t);return h(o!==void 0?o:n(i))},set(o){e.get(t)!==o&&(e.set(t,o),a(),R(()=>{const{params:q,query:d,hash:g}=r;y[n(f)]({params:q,query:{...d,...Object.fromEntries(e.entries())},hash:g})}))}}));return w(()=>r.query[t],s=>{e.set(t,s),c()},{flush:"sync"}),l}export{j as u};
